<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>EQ - My Studio</title>
		<!-- 공통 스타일과 EQ 전용 스타일을 링크합니다. -->
		<link rel="stylesheet" href="./css/style.css" />
		<link rel="stylesheet" href="./css/eq.css" />
		<!-- 사용자 정보 관리용 스크립트 추가 -->
		<script type="text/javascript" src="./js/usermanager.js"></script>
	</head>
	<body>
		<!-- 헤더를 공통 스타일로 변경합니다. -->
		<header class="app-header">
			<div class="logo">
				<a href="index.html">STUDIO</a>
			</div>
			<nav class="navigation">
				<a href="eq.html" class="nav-btn active">EQ</a>
				<a href="convert.html" class="nav-btn">Transform</a>
			</nav>
		</header>

		<!-- content-area를 main-content 클래스를 가진 main 태그로 변경합니다. -->
		<main class="main-content">
			<div class="audio-controls">
				<div id="audio-info" class="audio-info">테스트 음원: Sine Wave 1kHz</div>
				<div class="control-buttons">
					<button id="play-pause-btn">▶ 재생</button>
					<button id="eq-toggle-btn" class="on">EQ ON</button>
				</div>
			</div>

			<h1>다중 EQ 응답 시각화 (PEQ + 31밴드 GEQ)</h1>

			<div id="graph-wrapper"><canvas id="responseCanvas" width="1200" height="380"></canvas></div>

			<div id="controls-section">
				<div id="tabs">
					<div class="tab-button active" data-tab="peq">파라메트릭 EQ (PEQ)</div>
					<div class="tab-button" data-tab="geq">그래픽 EQ (31밴드 GEQ)</div>
				</div>

				<div id="controls-container" class="active">
					<div class="controls-sub-container">
						<button id="add-eq-btn">➕</button>
						<button id="reset-peq-btn" onclick="resetPEQ()">PEQ 전체 초기화</button>
						<button id="save-peq-btn" onclick="savePEQ()">PEQ 전체 저장</button>
					</div>
					<div id="peq-list"></div>
				</div>
				<div id="geq-container"></div>
			</div>

			<div id="peq-modal" style="display: none">
				<div class="modal-content">
					<button id="modal-close-btn" onclick="closeModal()">X</button>
					<h2>PEQ 필터 #<span id="modal-eq-id-display"></span> 상세 설정</h2>
					<div id="modal-inputs"></div>
					<div id="modal-actions"></div>
				</div>
			</div>
		</main>

		<!-- 팝업 창은 원본 그대로 유지 -->
		<div id="param-popup" class="param-popup">
			<h4 id="popup-title"></h4>
			<div class="input-group">
				<label for="popup-type">유형</label>
				<select id="popup-type" onchange="updateFilterData(selectedFilterId, 'type', this.value)">
					<option value="PEAK">Peak/Dip</option>
					<option value="LSH">Low Shelf</option>
					<option value="HSH">High Shelf</option>
				</select>
			</div>
			<div class="input-group">
				<label for="popup-freq">Freq (Hz)</label>
				<input type="number" id="popup-freq" step="1" min="10" max="20000" onchange="updateFilterData(selectedFilterId, 'freq', this.value)"/>
			</div>
			<div class="input-group">
				<label for="popup-gain">Gain (dB)</label>
				<input type="number" id="popup-gain" step="0.1" min="-15" max="15" onchange="updateFilterData(selectedFilterId, 'gain', this.value)"/>
			</div>
			<div class="input-group">
				<label for="popup-q">Q 값</label>
				<input type="number" id="popup-q" step="0.01" min="0.7" max="100" onchange="updateFilterData(selectedFilterId, 'q', this.value)"/>
			</div>
			<button class="delete-btn-graph" id="popup-delete-btn">필터 삭제</button>
		</div>
		<!-- JAVASCRIPT -->
		<script type="text/javascript" src="./js/eqinit.js"></script>
	</body>
</html>
